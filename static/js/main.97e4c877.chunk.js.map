{"version":3,"sources":["Albums.js","FilterArtist.js","FilterDate.js","FilterBy.js","App.js","index.js"],"names":["Albums","props","artist","artists","albums","map","index","key","style","listStyle","className","src","coverArt","url","alt","name","releaseDate","href","target","rel","FilterArtist","type","onKeyUp","event","onTextChange","value","FilterDate","today","Date","filterDate","getMonth","getFullYear","getDate","placeholder","onChange","FilterBy","id","document","getElementById","checked","marginLeft","marginRight","App","state","isLoading","numFollowed","user","next","filterString","filterBy","prevProps","prevState","this","fetchData","accessToken","queryString","parse","window","location","search","access_token","setState","fetch","headers","Authorization","then","response","json","data","display_name","catch","error","console","log","artistData","total","items","albumDataPromises","Promise","all","albumDatas","forEach","albumData","i","includes","substring","indexOf","release_date","external_urls","spotify","images","fetchedArtists","currentFilterDate","item","filter","currentAlbum","sort","a","b","nameA","toLowerCase","nameB","artistsToRender","text","date","onClick","Component","ReactDOM","render"],"mappings":"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","file":"static/js/main.97e4c877.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nexport default function Albums(props) {\r\n    let artist = props.artists;\r\n    let albums = artist.albums\r\n    return (\r\n        <>\r\n            {albums.map((albums, index) => (\r\n                <li key={index} style={{ listStyle: \"none\" }}>\r\n                    <div className=\"album-content\">\r\n                        <img\r\n                            src={albums.coverArt.url}\r\n                            className=\"album-cover\"\r\n                            alt={albums.name}\r\n                        />\r\n                        <div className=\"description\">\r\n                            <h1 className=\"artist-name\">{artist.name}</h1>\r\n                            <br></br>\r\n                            <h1 className=\"album-title\">{albums.name}</h1>\r\n                            <br></br>\r\n                            <h1 className=\"release-date\">\r\n                                Release Date: {albums.releaseDate}\r\n                            </h1>\r\n                            <br></br>\r\n                            <a\r\n                                className=\"spotify-btn-bg\"\r\n                                href={albums.url}\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                            >\r\n                                <button className=\"open-in-spotify-btn\">\r\n                                    Open In Spotify\r\n                                </button>\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                </li>\r\n            ))}\r\n        </>\r\n    );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function FilterArtist(props) {\r\n  return (\r\n    <div className=\"filter\">\r\n      <span>Filter by Artist:</span>\r\n      <input\r\n        className=\"filter-input\"\r\n        type=\"text\"\r\n        onKeyUp={event => props.onTextChange(event.target.value)}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function FilterDate(props) {\r\n    let today = new Date();\r\n    let filterDate =\r\n        (today.getMonth() - 2 === 0\r\n            ? today.getFullYear() - 1\r\n            : today.getFullYear()) +\r\n        \"-\" +\r\n        (today.getMonth() - 2 === 0 ? 12 : today.getMonth() - 2) +\r\n        \"-\" +\r\n        today.getDate();\r\n    return (\r\n        <div className=\"filter\">\r\n            <span>Filter by Date:</span>\r\n            <input\r\n                className=\"filter-input\"\r\n                placeholder=\"2020-01-01\"\r\n                type=\"date\"\r\n                onChange={event => {\r\n                    if (event.target.value === \"\") {\r\n                        props.onChange(filterDate);\r\n                    } else {\r\n                        props.onChange(event.target.value);\r\n                    }\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function FilterBy(props) {\r\n    return (\r\n        <div className=\"filter\">\r\n            <span>Filter by:</span>\r\n            <input\r\n                className=\"filter-input\"\r\n                type=\"radio\"\r\n                name=\"artist\"\r\n                id=\"artist-radio\"\r\n                onChange={event => {\r\n                    document.getElementById(\"date-radio\").checked = false\r\n                    props.onChange(event.target.name)}\r\n                }\r\n            />\r\n            <label style={{marginLeft: \"5px\", marginRight: \"5px\"}}>Artist Name</label>\r\n            <input\r\n                className=\"filter-input\"\r\n                type=\"radio\"\r\n                name=\"date\"\r\n                id=\"date-radio\"\r\n                onChange={event => {\r\n                    document.getElementById(\"artist-radio\").checked = false\r\n                    props.onChange(event.target.name)}\r\n                }\r\n            />\r\n            <label style={{marginLeft: \"5px\", marginRight: \"5px\"}}>Release Date</label>\r\n        </div>\r\n    );\r\n}\r\n","import React, { Component } from \"react\";\nimport \"./App.css\";\nimport queryString from \"query-string\";\nimport Albums from \"./Albums\";\nimport FilterArtist from \"./FilterArtist\";\nimport FilterDate from \"./FilterDate\";\nimport FilterBy from \"./FilterBy\";\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        let today = new Date();\n        this.state = {\n            isLoading: false,\n            numFollowed: 0,\n            user: {\n                name: \"\"\n            },\n            artists: [\n                {\n                    name: \"\",\n                    href: \"\",\n                    albums: []\n                }\n            ],\n            next:\n                \"https://api.spotify.com/v1/me/following?limit=50&type=artist\",\n            filterString: \"\",\n            filterDate:\n                (today.getMonth() - 2 === 0\n                    ? today.getFullYear() - 1\n                    : today.getFullYear()) +\n                \"-\" +\n                (today.getMonth() - 2 === 0 ? 12 : today.getMonth() - 2) +\n                \"-\" +\n                today.getDate(),\n            filterBy: \"artist\"\n        };\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (this.state.next !== prevState.next) {\n            this.fetchData();\n        }\n    }\n\n    componentDidMount() {\n        this.fetchData();\n    }\n\n    fetchData() {\n        let parsedURI = queryString.parse(window.location.search);\n        let accessToken = parsedURI.access_token;\n        if (!accessToken) return;\n        // fetch user info\n        this.setState({ isLoading: true });\n        fetch(\"https://api.spotify.com/v1/me\", {\n            headers: { Authorization: \"Bearer \" + accessToken }\n        })\n            .then(response => response.json())\n            .then(data => {\n                this.setState({\n                    user: {\n                        isLoading: false,\n                        name: data.display_name\n                    }\n                });\n            })\n            .catch(error => {\n                this.setState({\n                    error,\n                    isLoading: false\n                });\n                console.log(error);\n            });\n\n        // fetch followed artist album info\n        this.setState({ isLoading: true });\n        if (this.state.next !== null) {\n            fetch(this.state.next, {\n                headers: { Authorization: \"Bearer \" + accessToken }\n            })\n                .then(response => response.json())\n                .then(artistData => {\n                    this.setState({\n                        isLoading: false,\n                        numFollowed: artistData.artists.total,\n                        next: artistData.artists.next\n                    });\n                    let artists = artistData.artists.items; // artist data as json\n                    let albumDataPromises = artists.map(artist => {\n                        // map over each artist and fetch albums\n                        let responsePromise = fetch(\n                            artist.href +\n                                \"/albums?offset=0&limit=50&include_groups=album,single\",\n                            {\n                                headers: {\n                                    Authorization: \"Bearer \" + accessToken\n                                }\n                            }\n                        );\n                        let albumDataPromise = responsePromise.then(response =>\n                            response.json()\n                        ); // album data as json\n                        return albumDataPromise;\n                    });\n                    let allAlbumDataPromises = Promise.all(albumDataPromises);\n                    let albumsPromise = allAlbumDataPromises.then(\n                        albumDatas => {\n                            albumDatas.forEach((albumData, i) => {\n                                artists[i].albums = albumData.items.map(\n                                    albumData => ({\n                                        name: albumData.name.includes(\"(\")\n                                            ? albumData.name.substring(\n                                                  0,\n                                                  albumData.name.indexOf(\"(\")\n                                              )\n                                            : albumData.name,\n                                        releaseDate: albumData.release_date,\n                                        url: albumData.external_urls.spotify,\n                                        coverArt: albumData.images[0]\n                                    })\n                                );\n                            });\n                            return artists;\n                        }\n                    );\n                    return albumsPromise;\n                })\n                .then(fetchedArtists => {\n                    let currentFilterDate = this.state.filterDate\n                    this.setState({\n                        artists: [\n                            ...this.state.artists,\n                            ...fetchedArtists.map(item => {\n                                return {\n                                    name: item.name,\n                                    albums: item.albums.filter(function(\n                                        currentAlbum\n                                    ) {\n                                        return (\n                                            currentAlbum.releaseDate >=\n                                            currentFilterDate\n                                        );\n                                    }) //TODO STILL NEED TO FILTER OUT DUPLICATES\n                                };\n                            })\n                        ]\n                    });\n                    this.setState({\n                        artists: this.state.artists.sort((a, b) => {\n                            let nameA = a.name.toLowerCase();\n                            let nameB = b.name.toLowerCase();\n                            if (nameA < nameB) return -1;\n                            if (nameA > nameB) return 1;\n                            return 0;\n                        })\n                    });\n                })\n                .catch(error => {\n                    this.setState({\n                        error,\n                        isLoading: false\n                    });\n                    console.log(error);\n                });\n        } else {\n            this.setState({\n                isLoading: false\n            });\n        }\n    }\n\n    render() {\n        // array of followed artists\n        let artistsToRender =\n            this.state.user && this.state.artists\n                ? this.state.artists.filter(artists =>\n                      artists.name\n                          .toLowerCase()\n                          .includes(this.state.filterString.toLowerCase())\n                  )\n                : [];\n\n        if (this.state.isLoading) {\n            return <p className=\"loading\">Loading...</p>;\n        }\n\n        return (\n            <div className=\"app\">\n                {this.state.user.name ? (\n                    <div>\n                        <h1 className=\"home-page-header\">\n                            {this.state.user.name}'s New Releases\n                        </h1>\n                        <h2 className=\"artist-counter\">\n                            {this.state.numFollowed} followed artists\n                        </h2>\n                        <div className=\"filter\">\n                            <FilterArtist\n                                onTextChange={text => {\n                                    this.setState({ filterString: text });\n                                }}\n                            />\n                            <FilterBy\n                                onChange={filter =>\n                                    this.setState({ filterBy: filter })\n                                }\n                            />\n                            <FilterDate\n                                onChange={date =>\n                                    this.setState({ filterDate: date })\n                                }\n                            />\n                        </div>\n                        <div className=\"album-layout\">\n                            {artistsToRender.map((artists, index) => (\n                                <Albums\n                                    key={index}\n                                    artists={artists}\n                                    filterDate={this.state.filterDate}\n                                />\n                            ))}\n                        </div>\n                    </div>\n                ) : (\n                    <button\n                        onClick={() => {\n                            window.location = window.location.href.includes(\n                                \"localhost\"\n                            )\n                                ? \"http://localhost:8888/login\"\n                                : \"https://spotifynewreleasesbackend.herokuapp.com/login\";\n                        }}\n                        className=\"sign-in-button\"\n                    >\n                        Sign in with Spotify\n                    </button>\n                )}\n            </div>\n        );\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n// renders the app component at the root element (index.html)\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}